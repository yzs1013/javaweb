{"remainingRequest":"D:\\JavaWebVue\\javaweb-ui\\node_modules\\babel-loader\\lib\\index.js!D:\\JavaWebVue\\javaweb-ui\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\JavaWebVue\\javaweb-ui\\src\\store\\modules\\user.js","dependencies":[{"path":"D:\\JavaWebVue\\javaweb-ui\\src\\store\\modules\\user.js","mtime":1616118574000},{"path":"D:\\JavaWebVue\\javaweb-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\JavaWebVue\\javaweb-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\JavaWebVue\\javaweb-ui\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3RhcnRzLXdpdGgiOwoKLyoqDQogKiDnmbvlvZXnirbmgIHnrqHnkIYNCiAqLwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwppbXBvcnQgc2V0dGluZyBmcm9tICdAL2NvbmZpZy9zZXR0aW5nJzsKaW1wb3J0IHV0aWwgZnJvbSAnQC91dGlscy91dGlsJzsKdmFyIGxvZ2luVXNlciA9IHt9OwoKdHJ5IHsKICBsb2dpblVzZXIgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKHNldHRpbmcudXNlclN0b3JlTmFtZSkgfHwgJ3t9JykgfHwge307Cn0gY2F0Y2ggKGUpIHsKICBjb25zb2xlLmVycm9yKGUpOwp9CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZXNwYWNlZDogdHJ1ZSwKICBzdGF0ZTogewogICAgdG9rZW46IGxvY2FsU3RvcmFnZS5nZXRJdGVtKHNldHRpbmcudG9rZW5TdG9yZU5hbWUpLAogICAgLy8g5b2T5YmNdG9rZW4KICAgIHVzZXI6IGxvZ2luVXNlciwKICAgIC8vIOW9k+WJjeeUqOaIt+S/oeaBrwogICAgYXV0aG9yaXRpZXM6IFtdLAogICAgLy8g5b2T5YmN55So5oi35p2D6ZmQCiAgICByb2xlczogW10sCiAgICAvLyDlvZPliY3nlKjmiLfop5LoibIKICAgIG1lbnVzOiBudWxsLAogICAgLy8g5b2T5YmN55So5oi355qE6I+c5Y2VCiAgICBwZXJtaXNzaW9uOiBbXSAvLyDlvZPliY3nmbvlvZXnlKjmiLfmiYDmi6XmnInnmoTmnYPpmZDoioLngrkKCiAgfSwKICBtdXRhdGlvbnM6IHsKICAgIFNFVDogZnVuY3Rpb24gU0VUKHN0YXRlLCBvYmopIHsKICAgICAgc3RhdGVbb2JqLmtleV0gPSBvYmoudmFsdWU7CiAgICB9LAogICAgU0VUX1BFUk1JU1NJT046IGZ1bmN0aW9uIFNFVF9QRVJNSVNTSU9OKHN0YXRlLCBkYXRhKSB7CiAgICAgIHN0YXRlLnBlcm1pc3Npb24gPSBkYXRhOwogICAgfQogIH0sCiAgYWN0aW9uczogewogICAgLyog6K6+572u6IqC54K55p2D6ZmQICovCiAgICBzZXRQZXJtaXNzaW9uOiBmdW5jdGlvbiBzZXRQZXJtaXNzaW9uKF9yZWYsIGRhdGEpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYuY29tbWl0OwogICAgICBjb21taXQoJ1NFVF9QRVJNSVNTSU9OJywgZGF0YSk7CiAgICB9LAoKICAgIC8qIOe8k+WtmHRva2VuICovCiAgICBzZXRUb2tlbjogZnVuY3Rpb24gc2V0VG9rZW4oX3JlZjIsIHRva2VuKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmMi5jb21taXQ7CiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKHNldHRpbmcudG9rZW5TdG9yZU5hbWUpOwogICAgICBpZiAodG9rZW4pIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHNldHRpbmcudG9rZW5TdG9yZU5hbWUsIHRva2VuKTtlbHNlIGNvbW1pdCgnU0VUJywgewogICAgICAgIGtleTogJ21lbnVzJywKICAgICAgICB2YWx1ZTogbnVsbAogICAgICB9KTsKICAgICAgY29tbWl0KCdTRVQnLCB7CiAgICAgICAga2V5OiAndG9rZW4nLAogICAgICAgIHZhbHVlOiB0b2tlbgogICAgICB9KTsKICAgICAgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bc2V0dGluZy50b2tlbkhlYWRlck5hbWVdID0gdG9rZW47CiAgICB9LAoKICAgIC8qIOe8k+WtmOeUqOaItyAqLwogICAgc2V0VXNlcjogZnVuY3Rpb24gc2V0VXNlcihfcmVmMywgdXNlcikgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjMuY29tbWl0OwogICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShzZXR0aW5nLnVzZXJTdG9yZU5hbWUpOwogICAgICBpZiAodXNlcikgbG9jYWxTdG9yYWdlLnNldEl0ZW0oc2V0dGluZy51c2VyU3RvcmVOYW1lLCBKU09OLnN0cmluZ2lmeSh1c2VyKSk7CiAgICAgIGNvbW1pdCgnU0VUJywgewogICAgICAgIGtleTogJ3VzZXInLAogICAgICAgIHZhbHVlOiB1c2VyCiAgICAgIH0pOwogICAgfSwKCiAgICAvKiDorr7nva7nlKjmiLfmnYPpmZAgKi8KICAgIHNldEF1dGhvcml0aWVzOiBmdW5jdGlvbiBzZXRBdXRob3JpdGllcyhfcmVmNCwgYXV0aG9yaXRpZXMpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWY0LmNvbW1pdDsKICAgICAgY29tbWl0KCdTRVQnLCB7CiAgICAgICAga2V5OiAnYXV0aG9yaXRpZXMnLAogICAgICAgIHZhbHVlOiBhdXRob3JpdGllcwogICAgICB9KTsKICAgIH0sCgogICAgLyog6K6+572u55So5oi36KeS6ImyICovCiAgICBzZXRSb2xlczogZnVuY3Rpb24gc2V0Um9sZXMoX3JlZjUsIHJvbGVzKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmNS5jb21taXQ7CiAgICAgIGNvbW1pdCgnU0VUJywgewogICAgICAgIGtleTogJ3JvbGVzJywKICAgICAgICB2YWx1ZTogcm9sZXMKICAgICAgfSk7CiAgICB9LAoKICAgIC8qIOiuvue9rueUqOaIt+iPnOWNlSAqLwogICAgc2V0TWVudXM6IGZ1bmN0aW9uIHNldE1lbnVzKF9yZWY2LCBtZW51cykgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjYuY29tbWl0OwogICAgICBjb21taXQoJ1NFVCcsIHsKICAgICAgICBrZXk6ICdtZW51cycsCiAgICAgICAgdmFsdWU6IG1lbnVzCiAgICAgIH0pOwogICAgfSwKCiAgICAvKiDojrflj5bnlKjmiLfoj5zljZXot6/nlLEgKi8KICAgIGdldE1lbnVSb3V0ZXJzOiBmdW5jdGlvbiBnZXRNZW51Um91dGVycyhfcmVmNykgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjcuY29tbWl0LAogICAgICAgICAgc3RhdGUgPSBfcmVmNy5zdGF0ZTsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICBpZiAoc3RhdGUubWVudXMpIHJldHVybiByZXNvbHZlKG1lbnVzVG9Sb3V0ZShzdGF0ZS5tZW51cykpOwoKICAgICAgICBpZiAoIXNldHRpbmcubWVudVVybCkgewogICAgICAgICAgY29tbWl0KCdTRVQnLCB7CiAgICAgICAgICAgIGtleTogJ21lbnVzJywKICAgICAgICAgICAgdmFsdWU6IFtdCiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybiByZXNvbHZlKG51bGwpOwogICAgICAgIH0KCiAgICAgICAgYXhpb3MuZ2V0KHNldHRpbmcubWVudVVybCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICB2YXIgbWVudXMgPSBzZXR0aW5nLnBhcnNlTWVudSA/IHNldHRpbmcucGFyc2VNZW51KHJlcy5kYXRhKSA6IHJlcy5kYXRhLmRhdGE7CiAgICAgICAgICByZXNvbHZlKG1lbnVzVG9Sb3V0ZShtZW51cykpOwogICAgICAgICAgY29tbWl0KCdTRVQnLCB7CiAgICAgICAgICAgIGtleTogJ21lbnVzJywKICAgICAgICAgICAgdmFsdWU6IG1lbnVzCiAgICAgICAgICB9KTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgcmVqZWN0KGUpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9Cn07Ci8qKiDoj5zljZXnlJ/miJDot6/nlLEgKi8KCmZ1bmN0aW9uIG1lbnVzVG9Sb3V0ZShtZW51cykgewogIHZhciByb3V0ZSA9IHsKICAgIHBhdGg6ICcvJywKICAgIG5hbWU6ICdtYWluJywKICAgIGNoaWxkcmVuOiBbXSwKICAgIHJlZGlyZWN0OiBudWxsCiAgfTsKICB1dGlsLmVhY2hUcmVlRGF0YShtZW51cywgZnVuY3Rpb24gKGl0ZW0pIHsKICAgIGlmIChzZXR0aW5nLnBhcnNlTWVudUl0ZW0pIGl0ZW0gPSBzZXR0aW5nLnBhcnNlTWVudUl0ZW0oaXRlbSk7CiAgICBpdGVtLm1ldGEgPSBPYmplY3QuYXNzaWduKHsKICAgICAgdGl0bGU6IGl0ZW0udGl0bGUsCiAgICAgIGljb246IGl0ZW0uaWNvbiwKICAgICAgaGlkZTogaXRlbS5oaWRlLAogICAgICB1aWQ6IGl0ZW0udWlkCiAgICB9LCBpdGVtLm1ldGEpOwoKICAgIGlmIChpdGVtLnBhdGggJiYgIWl0ZW0ucGF0aC5zdGFydHNXaXRoKCdodHRwOi8vJykgJiYgIWl0ZW0ucGF0aC5zdGFydHNXaXRoKCdodHRwczovLycpICYmICFpdGVtLnBhdGguc3RhcnRzV2l0aCgnLy8nKSkgewogICAgICBpZiAoIXJvdXRlLnJlZGlyZWN0KSB7CiAgICAgICAgcm91dGUucmVkaXJlY3QgPSBpdGVtLnBhdGg7CiAgICAgICAgaWYgKCFzZXR0aW5nLmhvbWVUaXRsZSkgc2V0dGluZy5ob21lVGl0bGUgPSBpdGVtLm1ldGEudGl0bGU7CiAgICAgIH0KCiAgICAgIHJvdXRlLmNoaWxkcmVuLnB1c2goewogICAgICAgIHBhdGg6IGl0ZW0ucGF0aCwKICAgICAgICBuYW1lOiBpdGVtLm5hbWUgfHwgaXRlbS5wYXRoLAogICAgICAgIG1ldGE6IGl0ZW0ubWV0YSwKICAgICAgICBjb21wb25lbnQ6IGZ1bmN0aW9uIGNvbXBvbmVudCgpIHsKICAgICAgICAgIHJldHVybiBpbXBvcnQoJ0Avdmlld3MnICsgKGl0ZW0uY29tcG9uZW50IHx8IGl0ZW0ucGF0aCkpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSk7CiAgcmV0dXJuIHJvdXRlOwp9"},{"version":3,"sources":["D:/JavaWebVue/javaweb-ui/src/store/modules/user.js"],"names":["axios","setting","util","loginUser","JSON","parse","localStorage","getItem","userStoreName","e","console","error","namespaced","state","token","tokenStoreName","user","authorities","roles","menus","permission","mutations","SET","obj","key","value","SET_PERMISSION","data","actions","setPermission","commit","setToken","removeItem","setItem","defaults","headers","common","tokenHeaderName","setUser","stringify","setAuthorities","setRoles","setMenus","getMenuRouters","Promise","resolve","reject","menusToRoute","menuUrl","get","then","res","parseMenu","catch","route","path","name","children","redirect","eachTreeData","item","parseMenuItem","meta","Object","assign","title","icon","hide","uid","startsWith","homeTitle","push","component"],"mappings":"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","sourcesContent":["/**\r\n * 登录状态管理\r\n */\r\nimport axios from 'axios'\r\nimport setting from '@/config/setting'\r\nimport util from '@/utils/util'\r\n\r\nlet loginUser = {};\r\ntry {\r\n    loginUser = JSON.parse(localStorage.getItem(setting.userStoreName) || '{}') || {};\r\n} catch (e) {\r\n    console.error(e);\r\n}\r\n\r\nexport default {\r\n    namespaced: true,\r\n    state: {\r\n        token: localStorage.getItem(setting.tokenStoreName),  // 当前token\r\n        user: loginUser,  // 当前用户信息\r\n        authorities: [], // 当前用户权限\r\n        roles: [],  // 当前用户角色\r\n        menus: null,  // 当前用户的菜单\r\n        permission:[] // 当前登录用户所拥有的权限节点\r\n    },\r\n    mutations: {\r\n        SET: (state, obj) => {\r\n            state[obj.key] = obj.value;\r\n        },\r\n        SET_PERMISSION(state,data){\r\n            state.permission=data\r\n        }\r\n    },\r\n    actions: {\r\n        /* 设置节点权限 */\r\n        setPermission({commit},data){\r\n            commit('SET_PERMISSION',data)\r\n        },\r\n        /* 缓存token */\r\n        setToken({commit}, token) {\r\n            localStorage.removeItem(setting.tokenStoreName);\r\n            if (token) localStorage.setItem(setting.tokenStoreName, token);\r\n            else commit('SET', {key: 'menus', value: null});\r\n            commit('SET', {key: 'token', value: token});\r\n            axios.defaults.headers.common[setting.tokenHeaderName] = token;\r\n        },\r\n        /* 缓存用户 */\r\n        setUser({commit}, user) {\r\n            localStorage.removeItem(setting.userStoreName);\r\n            if (user) localStorage.setItem(setting.userStoreName, JSON.stringify(user));\r\n            commit('SET', {key: 'user', value: user});\r\n        },\r\n        /* 设置用户权限 */\r\n        setAuthorities({commit}, authorities) {\r\n            commit('SET', {key: 'authorities', value: authorities});\r\n        },\r\n        /* 设置用户角色 */\r\n        setRoles({commit}, roles) {\r\n            commit('SET', {key: 'roles', value: roles});\r\n        },\r\n        /* 设置用户菜单 */\r\n        setMenus({commit}, menus) {\r\n            commit('SET', {key: 'menus', value: menus});\r\n        },\r\n        /* 获取用户菜单路由 */\r\n        getMenuRouters({commit, state}) {\r\n            return new Promise((resolve, reject) => {\r\n                if (state.menus) return resolve(menusToRoute(state.menus));\r\n                if (!setting.menuUrl) {\r\n                    commit('SET', {key: 'menus', value: []});\r\n                    return resolve(null);\r\n                }\r\n                axios.get(setting.menuUrl).then(res => {\r\n                    let menus = setting.parseMenu ? setting.parseMenu(res.data) : res.data.data;\r\n                    resolve(menusToRoute(menus));\r\n                    commit('SET', {key: 'menus', value: menus});\r\n                }).catch(e => {\r\n                    reject(e);\r\n                });\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\n/** 菜单生成路由 */\r\nfunction menusToRoute(menus) {\r\n    let route = {path: '/', name: 'main', children: [], redirect: null};\r\n    util.eachTreeData(menus, (item) => {\r\n        if (setting.parseMenuItem) item = setting.parseMenuItem(item);\r\n        item.meta = Object.assign({title: item.title, icon: item.icon, hide: item.hide, uid: item.uid}, item.meta);\r\n        if (item.path && !item.path.startsWith('http://') && !item.path.startsWith('https://')\r\n            && !item.path.startsWith('//')) {\r\n            if (!route.redirect) {\r\n                route.redirect = item.path;\r\n                if (!setting.homeTitle) setting.homeTitle = item.meta.title;\r\n            }\r\n            route.children.push({\r\n                path: item.path, name: item.name || item.path, meta: item.meta,\r\n                component: () => import('@/views' + (item.component || item.path))\r\n            });\r\n        }\r\n    });\r\n    return route;\r\n}\r\n"]}]}