(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f381777c"],{"206d":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAmCAYAAACoPemuAAAAAXNSR0IArs4c6QAAAJ5JREFUWAnt2DEKwDAMA8Ck9Cl9e/Ko9i8uXrUIBQ8eVMhgUEW4Zggdo+jZe7+5iurGXVUUEU9VV/ZclWWVXd6Yqmkxi6kCat5nzGKqgJr3GbOYKqDm256xmbfO6kueqoP5OefXVgw3ezyvtSLXcQG82FbMG4MvRUeLUSIIWAxA6GgxSgQBiwEIHS1GiSBgMQChY1uxsn+weR2mDELgB3FmFp5YffVrAAAAAElFTkSuQmCC"},"2e58":function(e,t,i){},"5cc6":function(e,t,i){var a=i("74e8");a("Uint8",(function(e){return function(t,i,a){return e(this,t,i,a)}}))},"68b4":function(e,t,i){"use strict";i("2e58")},"6e18":function(e,t,i){},c19f:function(e,t,i){"use strict";var a=i("23e7"),r=i("da84"),o=i("621a"),l=i("2626"),s="ArrayBuffer",n=o[s],c=r[s];a({global:!0,forced:c!==n},{ArrayBuffer:n}),l(s)},cbc3:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"finish_room"},[i("div",{staticClass:"finish_room2"},[i("div",{attrs:{images:e.photo}},e._l(e.photo,(function(t,a){return i("div",{key:a,staticClass:"room_img"},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:"string"==typeof t?t:t.url,expression:"typeof item == 'string' ? item : item.url"}]}),e.disabled?e._e():i("div",{staticClass:"im-button",on:{click:function(t){return e.deleteImg(a)}}},[i("div",{staticClass:"im-close"}),i("div",{staticClass:"im-close1"})])])})),0),e.photo.length<e.limit?i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"room_add_img"},[e._m(0),i("input",{attrs:{disabled:e.disabled,type:"file"},on:{change:e.add_img}})]):e._e()])])},r=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticStyle:{"margin-top":"35px"}},[a("img",{attrs:{src:i("206d")}})])}],o=(i("a434"),i("c19f"),i("a9e3"),i("d3b7"),i("ac1f"),i("1276"),i("5cc6"),i("9a8c"),i("a975"),i("735e"),i("c1ac"),i("d139"),i("3a7b"),i("d5d6"),i("82f8"),i("e91f"),i("60bd"),i("5f96"),i("3280"),i("3fcc"),i("ca91"),i("25a1"),i("cd26"),i("3c5d"),i("2954"),i("649e"),i("219c"),i("170b"),i("b39a"),i("72f7"),i("bc3a")),l=i.n(o),s={props:{limit:{type:Number,default:function(){return 1}},updDir:{type:String,default:function(){return"error"}},disabled:{type:Boolean,default:function(){return!1}},isCompress:{type:Boolean,default:function(){return!1}},value:{type:[Array,String],default:function(){return[]}}},data:function(){return{photo:[],loading:!1}},watch:{photo:function(){1==this.limit?this.$emit("input",this.photo.length>0?this.photo[0].url:""):this.$emit("input",this.photo)},value:function(){1==this.limit?this.value instanceof Array?this.photo=[]:this.photo=this.value?[{url:this.value}]:[]:this.photo=this.value||[],"string"==typeof this.photo&&(this.photo=[this.photo])}},mounted:function(){1==this.limit?this.value instanceof Array?this.photo=[]:this.photo=this.value?[this.value]:[]:this.photo=this.value||[],"string"==typeof this.photo&&(this.photo=[this.photo])},methods:{deleteImg:function(e){this.photo.splice(e,1)},compress:function(e){var t=null,i=document.createElement("canvas"),a=e.height/e.width;i.width=720,i.height=720*a;var r=i.getContext("2d");return r.clearRect(0,0,i.width,i.height),r.drawImage(e,0,0,i.width,i.height),t=i.toDataURL("image/jpeg"),t},dataURItoBlob:function(e){for(var t=window.atob(e.split(",")[1]),i=e.split(",")[0].split(":")[1].split(";")[0],a=new ArrayBuffer(t.length),r=new Uint8Array(a),o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return new window.Blob([a],{type:i})},add_img:function(e){var t=e.target.files[0];if(/\.(gif|jpg|jpeg|png|GIF|JPG|PNG)$/.test(e.target.value)){var i=10485760,a=t.size;if(a>i)return e.target.value="",void this.$notify.error({title:"上传图片错误",message:"上传图片不能超过10M"});this.loading=!0;var r=new FileReader,o=this;r.readAsDataURL(t);var s=new Image,n=this.updDir;r.onload=function(i){s.src=this.result,s.onload=function(){var a=this,r=i.target.result,c=t;o.isCompress&&(r=o.compress(s),c=o.dataURItoBlob(r));var u=new window.FormData;u.append("file",c),l()({method:"POST",url:"/upload/uploadImage/"+n,data:u,timeout:1e6,headers:{"Content-Type":"multipart/form-data"}}).then((function(i){e.target.value="",o.photo.push({fileName:t.fileName,url:i.data.data}),o.loading=!1})).catch((function(t){e.target.value="",o.loading=!1,a.$message.error(t.message)}))}}}else e.target.value="",this.$notify.error({title:"上传图片错误",message:"请上传gif|jpg|jpeg|png|GIF|JPG|PNG格式图片"})}}},n=s,c=(i("f960"),i("0c7c")),u=Object(c["a"])(n,a,r,!1,null,null,null);t["a"]=u.exports},f6d6:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-drawer",{staticClass:"edit-table",attrs:{title:"编辑布局",visible:e.visible,direction:e.direction,size:"calc(100vw - 256px)","before-close":e.handleClose},on:{"update:visible":function(t){e.visible=t}}},[i("el-form",{ref:"editForm",staticStyle:{margin:"10px auto"},attrs:{model:e.editForm,rules:e.editRules,"label-width":"150px"}},[i("el-form-item",{attrs:{label:"布局图片："}},[i("uploadImage",{attrs:{limit:1,updDir:e.updDir},model:{value:e.editForm.image,callback:function(t){e.$set(e.editForm,"image",t)},expression:"editForm.image"}})],1),i("el-row",{attrs:{gutter:15}},[i("el-col",{attrs:{sm:12}},[i("el-form-item",{attrs:{label:"布局位置描述：",prop:"locDesc"}},[i("el-input",{attrs:{placeholder:"请输入布局位置描述",clearable:""},model:{value:e.editForm.locDesc,callback:function(t){e.$set(e.editForm,"locDesc",t)},expression:"editForm.locDesc"}})],1),i("el-form-item",{attrs:{label:"所属站点：",prop:"itemId",rules:{required:!0,message:"所属站点不能为空",trigger:"change"}}},[i("el-select",{staticClass:"ele-block",attrs:{filterable:"",clearable:"",size:"small",placeholder:"-请选择所属站点-"},model:{value:e.editForm.itemId,callback:function(t){e.$set(e.editForm,"itemId",t)},expression:"editForm.itemId"}},e._l(e.itemList,(function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),i("el-form-item",{attrs:{label:"布局类型：",prop:"type"}},[i("el-select",{staticClass:"ele-block",attrs:{placeholder:"请选择布局类型：",clearable:""},model:{value:e.editForm.type,callback:function(t){e.$set(e.editForm,"type",t)},expression:"editForm.type"}},[i("el-option",{attrs:{label:"CMS文章",value:1}}),i("el-option",{attrs:{label:"通知公告",value:2}})],1)],1)],1),i("el-col",{attrs:{sm:12}},[i("el-form-item",{attrs:{label:"布局描述位置：",prop:"locId"}},[i("el-input",{attrs:{placeholder:"请输入布局描述位置",clearable:""},model:{value:e.editForm.locId,callback:function(t){e.$set(e.editForm,"locId",t)},expression:"editForm.locId"}})],1),i("el-form-item",{attrs:{label:"排序号：",prop:"sort"}},[i("el-input-number",{staticClass:"ele-fluid ele-text-left",attrs:{"controls-position":"right",min:0,placeholder:"请输入排序号"},model:{value:e.editForm.sort,callback:function(t){e.$set(e.editForm,"sort",t)},expression:"editForm.sort"}})],1),i("el-form-item",{attrs:{label:"布局内容：",prop:"typeId"}},[i("el-input",{attrs:{placeholder:"请选择布局内容",clearable:""},model:{value:e.editForm.typeId,callback:function(t){e.$set(e.editForm,"typeId",t)},expression:"editForm.typeId"}})],1)],1)],1),i("el-form-item",{staticStyle:{"text-align":"center","margin-left":"-100px","margin-top":"10px"}},[i("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.save}},[e._v("保存 ")]),i("el-button",{attrs:{size:"medium"},on:{click:function(t){return e.$emit("returnBack")}}},[e._v("返回")])],1)],1)],1)},r=[],o=(i("a9e3"),i("cbc3")),l={name:"LayoutEdit",components:{uploadImage:o["a"]},data:function(){return{direction:"rtl",editForm:{},editRules:{locDesc:[{required:!0,message:"请输入布局位置描述",trigger:"blur"}],locId:[{required:!0,message:"请选择所属布局位置",trigger:"blur"}],itemId:[{required:!0,message:"请选择所属站点",trigger:"blur"}],type:[{required:!0,message:"请选择布局类型",trigger:"blur"}],typeId:[{required:!0,message:"请选择布局内容",trigger:"blur"}],sort:[{required:!0,message:"请输入排序",trigger:"blur"}]},updDir:"layout"}},props:{visible:{type:Boolean,default:function(){return!1}},layoutId:{type:Number,default:function(){return 0}},itemList:{type:Array,default:function(){return[]}}},computed:{},mounted:function(){this.getLayoutInfo()},methods:{getLayoutInfo:function(){var e=this;this.$http.get("/layout/info/"+this.layoutId).then((function(t){0===t.data.code?e.editForm=t.data.data:e.$message.error(t.data.msg)})).catch((function(t){e.$message.error(t.message)}))},save:function(){var e=this;this.$refs["editForm"].validate((function(t){if(!t)return!1;var i=e.$loading({lock:!0});e.$http[e.editForm.id?"put":"post"](e.editForm.id?"/layout/edit":"/layout/add",e.editForm).then((function(t){i.close(),0===t.data.code?(e.$message({type:"success",message:t.data.msg}),e.$emit("reload")):e.$message.error(t.data.msg)})).catch((function(t){i.close(),e.$message.error(t.message)}))}))},handleClose:function(e){e&&e(),this.$emit("returnBack")}}},s=l,n=(i("68b4"),i("0c7c")),c=Object(n["a"])(s,a,r,!1,null,"1c9fe66c",null);t["default"]=c.exports},f960:function(e,t,i){"use strict";i("6e18")}}]);