{"remainingRequest":"D:\\JavaWebVue\\javaweb-ui\\node_modules\\babel-loader\\lib\\index.js!D:\\JavaWebVue\\javaweb-ui\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\JavaWebVue\\javaweb-ui\\src\\config\\axios.js","dependencies":[{"path":"D:\\JavaWebVue\\javaweb-ui\\src\\config\\axios.js","mtime":1616232220000},{"path":"D:\\JavaWebVue\\javaweb-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\JavaWebVue\\javaweb-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\JavaWebVue\\javaweb-ui\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UiOwoKLyoqDQogKiBheGlvc+mFjee9rg0KICovCmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IFZ1ZUF4aW9zIGZyb20gJ3Z1ZS1heGlvcyc7CmltcG9ydCBzdG9yZSBmcm9tICdAL3N0b3JlJzsKaW1wb3J0IHJvdXRlciBmcm9tICdAL3JvdXRlcic7CmltcG9ydCBzZXR0aW5nIGZyb20gJy4vc2V0dGluZyc7CmltcG9ydCB7IE1lc3NhZ2VCb3ggfSBmcm9tICdlbGVtZW50LXVpJzsKVnVlLnVzZShWdWVBeGlvcywgYXhpb3MpOwpheGlvcy5kZWZhdWx0cy5iYXNlVVJMID0gc2V0dGluZy5iYXNlVVJMOwpheGlvcy5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vbltzZXR0aW5nLnRva2VuSGVhZGVyTmFtZV0gPSBzdG9yZS5zdGF0ZS51c2VyLnRva2VuOwovKiDlk43lupTmi6bmiKrlmaggKi8KCmF4aW9zLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoZnVuY3Rpb24gKHJlcykgewogIGlmIChyZXMuZGF0YS5jb2RlID09PSA0MDEpIHsKICAgIC8vIOeZu+W9lei/h+acn+WkhOeQhgogICAgaWYgKHJlcy5jb25maWcudXJsID09PSBzZXR0aW5nLm1lbnVVcmwpIHsKICAgICAgc3RvcmUuZGlzcGF0Y2goJ3VzZXIvc2V0VG9rZW4nKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBsb2NhdGlvbi5yZXBsYWNlKCcvJyk7CiAgICAgIH0pOwogICAgICByZXR1cm47CiAgICB9CgogICAgTWVzc2FnZUJveC5hbGVydCgn55m75b2V54q25oCB5bey6L+H5pyf77yM6K+36YCA5Ye66YeN5paw55m75b2V77yBJywgJ+ezu+e7n+aPkOekuicsIHsKICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfph43mlrDnmbvlvZUnLAogICAgICBjYWxsYmFjazogZnVuY3Rpb24gY2FsbGJhY2soYWN0aW9uKSB7CiAgICAgICAgaWYgKGFjdGlvbiA9PT0gJ2NvbmZpcm0nKSB7CiAgICAgICAgICBzdG9yZS5kaXNwYXRjaCgndXNlci9zZXRUb2tlbicpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICByb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgcGF0aDogJy9sb2dpbicKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGJlZm9yZUNsb3NlOiBmdW5jdGlvbiBiZWZvcmVDbG9zZSgpIHsKICAgICAgICBNZXNzYWdlQm94LmNsb3NlKCk7CiAgICAgIH0KICAgIH0pOwogICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihyZXMuZGF0YS5tc2cpKTsKICB9IC8vIHRva2Vu6Ieq5Yqo57ut5pyfCgoKICB2YXIgYWNjZXNzX3Rva2VuID0gcmVzLmhlYWRlcnNbc2V0dGluZy50b2tlbkhlYWRlck5hbWVdOwogIGlmIChhY2Nlc3NfdG9rZW4pIHN0b3JlLmRpc3BhdGNoKCd1c2VyL3NldFRva2VuJywgYWNjZXNzX3Rva2VuKTsKICByZXR1cm4gcmVzOwp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwp9KTs="},{"version":3,"sources":["D:/JavaWebVue/javaweb-ui/src/config/axios.js"],"names":["Vue","axios","VueAxios","store","router","setting","MessageBox","use","defaults","baseURL","headers","common","tokenHeaderName","state","user","token","interceptors","response","res","data","code","config","url","menuUrl","dispatch","then","location","replace","alert","confirmButtonText","callback","action","push","path","beforeClose","close","Promise","reject","Error","msg","access_token","error"],"mappings":";;;;AAAA;AACA;AACA;AACA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,QAAP,MAAqB,WAArB;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,SAAQC,UAAR,QAAyB,YAAzB;AAEAN,GAAG,CAACO,GAAJ,CAAQL,QAAR,EAAkBD,KAAlB;AAEAA,KAAK,CAACO,QAAN,CAAeC,OAAf,GAAyBJ,OAAO,CAACI,OAAjC;AACAR,KAAK,CAACO,QAAN,CAAeE,OAAf,CAAuBC,MAAvB,CAA8BN,OAAO,CAACO,eAAtC,IAAyDT,KAAK,CAACU,KAAN,CAAYC,IAAZ,CAAiBC,KAA1E;AAEA;;AACAd,KAAK,CAACe,YAAN,CAAmBC,QAAnB,CAA4BV,GAA5B,CAAgC,UAACW,GAAD,EAAS;AACrC,MAAIA,GAAG,CAACC,IAAJ,CAASC,IAAT,KAAkB,GAAtB,EAA2B;AAAG;AAC1B,QAAIF,GAAG,CAACG,MAAJ,CAAWC,GAAX,KAAmBjB,OAAO,CAACkB,OAA/B,EAAwC;AACpCpB,MAAAA,KAAK,CAACqB,QAAN,CAAe,eAAf,EAAgCC,IAAhC,CAAqC,YAAM;AACvCC,QAAAA,QAAQ,CAACC,OAAT,CAAiB,GAAjB;AACH,OAFD;AAGA;AACH;;AACDrB,IAAAA,UAAU,CAACsB,KAAX,CAAiB,kBAAjB,EAAqC,MAArC,EAA6C;AACzCC,MAAAA,iBAAiB,EAAE,MADsB;AAEzCC,MAAAA,QAAQ,EAAE,kBAAAC,MAAM,EAAI;AAChB,YAAIA,MAAM,KAAK,SAAf,EAA0B;AACtB5B,UAAAA,KAAK,CAACqB,QAAN,CAAe,eAAf,EAAgCC,IAAhC,CAAqC,YAAM;AACvCrB,YAAAA,MAAM,CAAC4B,IAAP,CAAY;AAACC,cAAAA,IAAI,EAAE;AAAP,aAAZ;AACH,WAFD;AAGH;AACJ,OARwC;AASzCC,MAAAA,WAAW,EAAE,uBAAM;AACf5B,QAAAA,UAAU,CAAC6B,KAAX;AACH;AAXwC,KAA7C;AAaA,WAAOC,OAAO,CAACC,MAAR,CAAe,IAAIC,KAAJ,CAAUpB,GAAG,CAACC,IAAJ,CAASoB,GAAnB,CAAf,CAAP;AACH,GAtBoC,CAuBrC;;;AACA,MAAIC,YAAY,GAAGtB,GAAG,CAACR,OAAJ,CAAYL,OAAO,CAACO,eAApB,CAAnB;AACA,MAAI4B,YAAJ,EAAkBrC,KAAK,CAACqB,QAAN,CAAe,eAAf,EAAgCgB,YAAhC;AAClB,SAAOtB,GAAP;AACH,CA3BD,EA2BG,UAACuB,KAAD,EAAW;AACV,SAAOL,OAAO,CAACC,MAAR,CAAeI,KAAf,CAAP;AACH,CA7BD","sourcesContent":["/**\r\n * axios配置\r\n */\r\nimport Vue from 'vue'\r\nimport axios from 'axios'\r\nimport VueAxios from 'vue-axios'\r\nimport store from '@/store'\r\nimport router from '@/router'\r\nimport setting from './setting'\r\nimport {MessageBox} from 'element-ui'\r\n\r\nVue.use(VueAxios, axios);\r\n\r\naxios.defaults.baseURL = setting.baseURL;\r\naxios.defaults.headers.common[setting.tokenHeaderName] = store.state.user.token;\r\n\r\n/* 响应拦截器 */\r\naxios.interceptors.response.use((res) => {\r\n    if (res.data.code === 401) {  // 登录过期处理\r\n        if (res.config.url === setting.menuUrl) {\r\n            store.dispatch('user/setToken').then(() => {\r\n                location.replace('/');\r\n            });\r\n            return;\r\n        }\r\n        MessageBox.alert('登录状态已过期，请退出重新登录！', '系统提示', {\r\n            confirmButtonText: '重新登录',\r\n            callback: action => {\r\n                if (action === 'confirm') {\r\n                    store.dispatch('user/setToken').then(() => {\r\n                        router.push({path: '/login'});\r\n                    });\r\n                }\r\n            },\r\n            beforeClose: () => {\r\n                MessageBox.close();\r\n            }\r\n        });\r\n        return Promise.reject(new Error(res.data.msg));\r\n    }\r\n    // token自动续期\r\n    let access_token = res.headers[setting.tokenHeaderName];\r\n    if (access_token) store.dispatch('user/setToken', access_token);\r\n    return res;\r\n}, (error) => {\r\n    return Promise.reject(error);\r\n});\r\n"]}]}