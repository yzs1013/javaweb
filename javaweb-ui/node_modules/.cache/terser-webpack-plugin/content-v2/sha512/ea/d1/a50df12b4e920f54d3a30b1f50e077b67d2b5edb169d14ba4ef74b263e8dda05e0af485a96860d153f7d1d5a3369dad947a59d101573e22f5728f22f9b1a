{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-3dae13d4\",\"chunk-f381777c\"],{\"206d\":function(e,t){e.exports=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAmCAYAAACoPemuAAAAAXNSR0IArs4c6QAAAJ5JREFUWAnt2DEKwDAMA8Ck9Cl9e/Ko9i8uXrUIBQ8eVMhgUEW4Zggdo+jZe7+5iurGXVUUEU9VV/ZclWWVXd6Yqmkxi6kCat5nzGKqgJr3GbOYKqDm256xmbfO6kueqoP5OefXVgw3ezyvtSLXcQG82FbMG4MvRUeLUSIIWAxA6GgxSgQBiwEIHS1GiSBgMQChY1uxsn+weR2mDELgB3FmFp5YffVrAAAAAElFTkSuQmCC\"},\"2e58\":function(e,t,i){},\"3cbf\":function(e,t,i){},\"50f6\":function(e,t,i){\"use strict\";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"div\",{staticClass:\"ele-body\"},[i(\"el-card\",{attrs:{shadow:\"never\"}},[i(\"el-form\",{staticClass:\"ele-form-search\",attrs:{model:e.table.where,\"label-width\":\"90px\"},nativeOn:{keyup:function(t){return!t.type.indexOf(\"key\")&&e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?null:e.$refs.table.reload()},submit:function(e){e.preventDefault()}}},[i(\"el-row\",{attrs:{gutter:15}},[i(\"el-col\",{attrs:{md:6,sm:12}},[i(\"el-form-item\",{attrs:{label:\"所属站点\"}},[i(\"el-select\",{staticClass:\"ele-block\",attrs:{filterable:\"\",clearable:\"\",size:\"small\",placeholder:\"-请选择所属站点-\"},model:{value:e.table.where.itemId,callback:function(t){e.$set(e.table.where,\"itemId\",t)},expression:\"table.where.itemId\"}},e._l(e.itemList,(function(e){return i(\"el-option\",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),i(\"el-col\",{attrs:{md:6,sm:12}},[i(\"div\",{staticClass:\"ele-form-actions\"},[i(\"el-button\",{staticClass:\"ele-btn-icon\",attrs:{type:\"primary\",icon:\"el-icon-search\"},on:{click:function(t){return e.$refs.table.reload()}}},[e._v(\"查询 \")]),i(\"el-button\",{on:{click:function(t){(e.table.where={})&&e.$refs.table.reload()}}},[e._v(\"重置\")])],1)])],1)],1),i(\"div\",{staticClass:\"ele-table-tool ele-table-tool-default\"},[e.permission.includes(\"sys:layout:add\")?i(\"el-button\",{staticClass:\"ele-btn-icon\",attrs:{type:\"primary\",icon:\"el-icon-plus\",size:\"small\"},on:{click:function(t){e.showEdit=!0}}},[e._v(\"添加 \")]):e._e(),e.permission.includes(\"sys:layout:dall\")?i(\"el-button\",{staticClass:\"ele-btn-icon\",attrs:{type:\"danger\",icon:\"el-icon-delete\",size:\"small\"},on:{click:function(t){return e.remove()}}},[e._v(\"批量删除 \")]):e._e()],1),i(\"ele-data-table\",{ref:\"table\",attrs:{config:e.table,choose:e.choose,height:\"calc(100vh - 315px)\",\"highlight-current-row\":\"\"},on:{\"update:choose\":function(t){e.choose=t}},scopedSlots:e._u([{key:\"default\",fn:function(t){var o=t.index;return[i(\"el-table-column\",{attrs:{type:\"selection\",width:\"45\",align:\"center\",fixed:\"left\"}}),i(\"el-table-column\",{attrs:{type:\"index\",index:o,label:\"编号\",width:\"60\",align:\"center\",fixed:\"left\",\"show-overflow-tooltip\":\"\"}}),i(\"el-table-column\",{attrs:{prop:\"locDesc\",label:\"布局描述\",sortable:\"custom\",\"show-overflow-tooltip\":\"\",\"min-width\":\"200\"}}),i(\"el-table-column\",{attrs:{prop:\"locId\",label:\"布局位置\",sortable:\"custom\",\"show-overflow-tooltip\":\"\",\"min-width\":\"120\"}}),i(\"el-table-column\",{attrs:{prop:\"itemName\",label:\"所属站点\",sortable:\"custom\",\"show-overflow-tooltip\":\"\",\"min-width\":\"120\"}}),i(\"el-table-column\",{attrs:{label:\"布局图片\",\"min-width\":\"80\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(e){var t=e.row;return[i(\"el-avatar\",{attrs:{shape:\"square\",size:25,src:t.image}})]}}],null,!0)}),i(\"el-table-column\",{attrs:{label:\"布局类型\",\"min-width\":\"80\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){var o=t.row;return[i(\"el-tag\",{attrs:{type:[\"\",\"success\"][o.type-1],size:\"mini\"}},[e._v(e._s([\"系统文章\",\"通知公告\"][o.type-1]))])]}}],null,!0)}),i(\"el-table-column\",{attrs:{prop:\"typeName\",label:\"类型描述\",\"show-overflow-tooltip\":\"\",\"min-width\":\"200\"}}),i(\"el-table-column\",{attrs:{prop:\"sort\",label:\"排序\",sortable:\"custom\",\"show-overflow-tooltip\":\"\"}}),i(\"el-table-column\",{attrs:{label:\"创建时间\",sortable:\"custom\",\"show-overflow-tooltip\":\"\",\"min-width\":\"160\"},scopedSlots:e._u([{key:\"default\",fn:function(t){var i=t.row;return[e._v(e._s(e._f(\"toDateString\")(i.createTime)))]}}],null,!0)}),i(\"el-table-column\",{attrs:{label:\"更新时间\",sortable:\"custom\",\"show-overflow-tooltip\":\"\",\"min-width\":\"160\"},scopedSlots:e._u([{key:\"default\",fn:function(t){var i=t.row;return[e._v(e._s(e._f(\"toDateString\")(i.updateTime)))]}}],null,!0)}),i(\"el-table-column\",{attrs:{label:\"操作\",width:\"130px\",align:\"center\",resizable:!1,fixed:\"right\"},scopedSlots:e._u([{key:\"default\",fn:function(t){var o=t.row;return[e.permission.includes(\"sys:layout:edit\")?i(\"el-link\",{attrs:{icon:\"el-icon-edit\",type:\"primary\",underline:!1},on:{click:function(t){return e.edit(o)}}},[e._v(\"修改\")]):e._e(),i(\"el-popconfirm\",{staticClass:\"ele-action\",attrs:{title:\"确定要删除此布局描述吗？\"},on:{confirm:function(t){return e.remove(o)}}},[e.permission.includes(\"sys:layout:delete\")?i(\"el-link\",{attrs:{slot:\"reference\",icon:\"el-icon-delete\",type:\"danger\",underline:!1},slot:\"reference\"},[e._v(\"删除\")]):e._e()],1)]}}],null,!0)})]}}])})],1),e.showEdit?i(\"editForm\",{attrs:{visible:e.showEdit,layoutId:e.layoutId,itemList:e.itemList},on:{returnBack:function(t){e.showEdit=!1},reload:function(t){e.showEdit=!1}}}):e._e()],1)},a=[],l=(i(\"d81d\"),i(\"5530\")),r=i(\"f6d6\"),s=i(\"2f62\"),n={name:\"SysLayout\",components:{editForm:r[\"default\"]},data:function(){return{table:{url:\"/layout/index\",where:{}},choose:[],showEdit:!1,itemList:[],layoutId:\"\"}},computed:Object(l[\"a\"])({},Object(s[\"b\"])([\"permission\"])),mounted:function(){this.getItemList()},methods:{edit:function(e){this.layoutId=e.id,this.showEdit=!0},remove:function(e){var t=this;if(e){var i=this.$loading({lock:!0});this.$http.delete(\"/layout/delete/\"+[e.id]).then((function(e){i.close(),0===e.data.code?(t.$message({type:\"success\",message:e.data.msg}),t.$refs.table.reload()):t.$message.error(e.data.msg)})).catch((function(e){i.close(),t.$message.error(e.message)}))}else{if(0===this.choose.length)return this.$message.error(\"请至少选择一条数据\");var o=this.choose.map((function(e){return e.id}));this.$confirm(\"确定要删除选中的布局描述吗?\",\"提示\",{type:\"warning\"}).then((function(){var e=t.$loading({lock:!0});t.$http.delete(\"/layout/delete/\"+o).then((function(i){e.close(),0===i.data.code?(t.$message({type:\"success\",message:i.data.msg}),t.$refs.table.reload()):t.$message.error(i.data.msg)})).catch((function(i){e.close(),t.$message.error(i.message)}))})).catch((function(){return 0}))}},getItemList:function(){var e=this;this.$http.get(\"/item/getItemList\").then((function(t){0===t.data.code?e.itemList=t.data.data:e.$message.error(t.data.msg)})).catch((function(t){e.$message.error(t.message)}))}}},c=n,u=(i(\"bd23\"),i(\"0c7c\")),d=Object(u[\"a\"])(c,o,a,!1,null,\"828d8ef2\",null);t[\"default\"]=d.exports},\"5cc6\":function(e,t,i){var o=i(\"74e8\");o(\"Uint8\",(function(e){return function(t,i,o){return e(this,t,i,o)}}))},\"68b4\":function(e,t,i){\"use strict\";i(\"2e58\")},\"6e18\":function(e,t,i){},bd23:function(e,t,i){\"use strict\";i(\"3cbf\")},c19f:function(e,t,i){\"use strict\";var o=i(\"23e7\"),a=i(\"da84\"),l=i(\"621a\"),r=i(\"2626\"),s=\"ArrayBuffer\",n=l[s],c=a[s];o({global:!0,forced:c!==n},{ArrayBuffer:n}),r(s)},cbc3:function(e,t,i){\"use strict\";var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"div\",{staticClass:\"finish_room\"},[i(\"div\",{staticClass:\"finish_room2\"},[i(\"div\",{attrs:{images:e.photo}},e._l(e.photo,(function(t,o){return i(\"div\",{key:o,staticClass:\"room_img\"},[i(\"img\",{directives:[{name:\"lazy\",rawName:\"v-lazy\",value:\"string\"==typeof t?t:t.url,expression:\"typeof item == 'string' ? item : item.url\"}]}),e.disabled?e._e():i(\"div\",{staticClass:\"im-button\",on:{click:function(t){return e.deleteImg(o)}}},[i(\"div\",{staticClass:\"im-close\"}),i(\"div\",{staticClass:\"im-close1\"})])])})),0),e.photo.length<e.limit?i(\"div\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loading,expression:\"loading\"}],staticClass:\"room_add_img\"},[e._m(0),i(\"input\",{attrs:{disabled:e.disabled,type:\"file\"},on:{change:e.add_img}})]):e._e()])])},a=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o(\"span\",{staticStyle:{\"margin-top\":\"35px\"}},[o(\"img\",{attrs:{src:i(\"206d\")}})])}],l=(i(\"a434\"),i(\"c19f\"),i(\"a9e3\"),i(\"d3b7\"),i(\"ac1f\"),i(\"1276\"),i(\"5cc6\"),i(\"9a8c\"),i(\"a975\"),i(\"735e\"),i(\"c1ac\"),i(\"d139\"),i(\"3a7b\"),i(\"d5d6\"),i(\"82f8\"),i(\"e91f\"),i(\"60bd\"),i(\"5f96\"),i(\"3280\"),i(\"3fcc\"),i(\"ca91\"),i(\"25a1\"),i(\"cd26\"),i(\"3c5d\"),i(\"2954\"),i(\"649e\"),i(\"219c\"),i(\"170b\"),i(\"b39a\"),i(\"72f7\"),i(\"bc3a\")),r=i.n(l),s={props:{limit:{type:Number,default:function(){return 1}},updDir:{type:String,default:function(){return\"error\"}},disabled:{type:Boolean,default:function(){return!1}},isCompress:{type:Boolean,default:function(){return!1}},value:{type:[Array,String],default:function(){return[]}}},data:function(){return{photo:[],loading:!1}},watch:{photo:function(){1==this.limit?this.$emit(\"input\",this.photo.length>0?this.photo[0].url:\"\"):this.$emit(\"input\",this.photo)},value:function(){1==this.limit?this.value instanceof Array?this.photo=[]:this.photo=this.value?[{url:this.value}]:[]:this.photo=this.value||[],\"string\"==typeof this.photo&&(this.photo=[this.photo])}},mounted:function(){1==this.limit?this.value instanceof Array?this.photo=[]:this.photo=this.value?[this.value]:[]:this.photo=this.value||[],\"string\"==typeof this.photo&&(this.photo=[this.photo])},methods:{deleteImg:function(e){this.photo.splice(e,1)},compress:function(e){var t=null,i=document.createElement(\"canvas\"),o=e.height/e.width;i.width=720,i.height=720*o;var a=i.getContext(\"2d\");return a.clearRect(0,0,i.width,i.height),a.drawImage(e,0,0,i.width,i.height),t=i.toDataURL(\"image/jpeg\"),t},dataURItoBlob:function(e){for(var t=window.atob(e.split(\",\")[1]),i=e.split(\",\")[0].split(\":\")[1].split(\";\")[0],o=new ArrayBuffer(t.length),a=new Uint8Array(o),l=0;l<t.length;l++)a[l]=t.charCodeAt(l);return new window.Blob([o],{type:i})},add_img:function(e){var t=e.target.files[0];if(/\\.(gif|jpg|jpeg|png|GIF|JPG|PNG)$/.test(e.target.value)){var i=10485760,o=t.size;if(o>i)return e.target.value=\"\",void this.$notify.error({title:\"上传图片错误\",message:\"上传图片不能超过10M\"});this.loading=!0;var a=new FileReader,l=this;a.readAsDataURL(t);var s=new Image,n=this.updDir;a.onload=function(i){s.src=this.result,s.onload=function(){var o=this,a=i.target.result,c=t;l.isCompress&&(a=l.compress(s),c=l.dataURItoBlob(a));var u=new window.FormData;u.append(\"file\",c),r()({method:\"POST\",url:\"/upload/uploadImage/\"+n,data:u,timeout:1e6,headers:{\"Content-Type\":\"multipart/form-data\"}}).then((function(i){e.target.value=\"\",l.photo.push({fileName:t.fileName,url:i.data.data}),l.loading=!1})).catch((function(t){e.target.value=\"\",l.loading=!1,o.$message.error(t.message)}))}}}else e.target.value=\"\",this.$notify.error({title:\"上传图片错误\",message:\"请上传gif|jpg|jpeg|png|GIF|JPG|PNG格式图片\"})}}},n=s,c=(i(\"f960\"),i(\"0c7c\")),u=Object(c[\"a\"])(n,o,a,!1,null,null,null);t[\"a\"]=u.exports},f6d6:function(e,t,i){\"use strict\";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"el-drawer\",{staticClass:\"edit-table\",attrs:{title:\"编辑布局\",visible:e.visible,direction:e.direction,size:\"calc(100vw - 256px)\",\"before-close\":e.handleClose},on:{\"update:visible\":function(t){e.visible=t}}},[i(\"el-form\",{ref:\"editForm\",staticStyle:{margin:\"10px auto\"},attrs:{model:e.editForm,rules:e.editRules,\"label-width\":\"150px\"}},[i(\"el-form-item\",{attrs:{label:\"布局图片：\"}},[i(\"uploadImage\",{attrs:{limit:1,updDir:e.updDir},model:{value:e.editForm.image,callback:function(t){e.$set(e.editForm,\"image\",t)},expression:\"editForm.image\"}})],1),i(\"el-row\",{attrs:{gutter:15}},[i(\"el-col\",{attrs:{sm:12}},[i(\"el-form-item\",{attrs:{label:\"布局位置描述：\",prop:\"locDesc\"}},[i(\"el-input\",{attrs:{placeholder:\"请输入布局位置描述\",clearable:\"\"},model:{value:e.editForm.locDesc,callback:function(t){e.$set(e.editForm,\"locDesc\",t)},expression:\"editForm.locDesc\"}})],1),i(\"el-form-item\",{attrs:{label:\"所属站点：\",prop:\"itemId\",rules:{required:!0,message:\"所属站点不能为空\",trigger:\"change\"}}},[i(\"el-select\",{staticClass:\"ele-block\",attrs:{filterable:\"\",clearable:\"\",size:\"small\",placeholder:\"-请选择所属站点-\"},model:{value:e.editForm.itemId,callback:function(t){e.$set(e.editForm,\"itemId\",t)},expression:\"editForm.itemId\"}},e._l(e.itemList,(function(e){return i(\"el-option\",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),i(\"el-form-item\",{attrs:{label:\"布局类型：\",prop:\"type\"}},[i(\"el-select\",{staticClass:\"ele-block\",attrs:{placeholder:\"请选择布局类型：\",clearable:\"\"},model:{value:e.editForm.type,callback:function(t){e.$set(e.editForm,\"type\",t)},expression:\"editForm.type\"}},[i(\"el-option\",{attrs:{label:\"CMS文章\",value:1}}),i(\"el-option\",{attrs:{label:\"通知公告\",value:2}})],1)],1)],1),i(\"el-col\",{attrs:{sm:12}},[i(\"el-form-item\",{attrs:{label:\"布局描述位置：\",prop:\"locId\"}},[i(\"el-input\",{attrs:{placeholder:\"请输入布局描述位置\",clearable:\"\"},model:{value:e.editForm.locId,callback:function(t){e.$set(e.editForm,\"locId\",t)},expression:\"editForm.locId\"}})],1),i(\"el-form-item\",{attrs:{label:\"排序号：\",prop:\"sort\"}},[i(\"el-input-number\",{staticClass:\"ele-fluid ele-text-left\",attrs:{\"controls-position\":\"right\",min:0,placeholder:\"请输入排序号\"},model:{value:e.editForm.sort,callback:function(t){e.$set(e.editForm,\"sort\",t)},expression:\"editForm.sort\"}})],1),i(\"el-form-item\",{attrs:{label:\"布局内容：\",prop:\"typeId\"}},[i(\"el-input\",{attrs:{placeholder:\"请选择布局内容\",clearable:\"\"},model:{value:e.editForm.typeId,callback:function(t){e.$set(e.editForm,\"typeId\",t)},expression:\"editForm.typeId\"}})],1)],1)],1),i(\"el-form-item\",{staticStyle:{\"text-align\":\"center\",\"margin-left\":\"-100px\",\"margin-top\":\"10px\"}},[i(\"el-button\",{attrs:{type:\"primary\",size:\"medium\"},on:{click:e.save}},[e._v(\"保存 \")]),i(\"el-button\",{attrs:{size:\"medium\"},on:{click:function(t){return e.$emit(\"returnBack\")}}},[e._v(\"返回\")])],1)],1)],1)},a=[],l=(i(\"a9e3\"),i(\"cbc3\")),r={name:\"LayoutEdit\",components:{uploadImage:l[\"a\"]},data:function(){return{direction:\"rtl\",editForm:{},editRules:{locDesc:[{required:!0,message:\"请输入布局位置描述\",trigger:\"blur\"}],locId:[{required:!0,message:\"请选择所属布局位置\",trigger:\"blur\"}],itemId:[{required:!0,message:\"请选择所属站点\",trigger:\"blur\"}],type:[{required:!0,message:\"请选择布局类型\",trigger:\"blur\"}],typeId:[{required:!0,message:\"请选择布局内容\",trigger:\"blur\"}],sort:[{required:!0,message:\"请输入排序\",trigger:\"blur\"}]},updDir:\"layout\"}},props:{visible:{type:Boolean,default:function(){return!1}},layoutId:{type:Number,default:function(){return 0}},itemList:{type:Array,default:function(){return[]}}},computed:{},mounted:function(){this.getLayoutInfo()},methods:{getLayoutInfo:function(){var e=this;this.$http.get(\"/layout/info/\"+this.layoutId).then((function(t){0===t.data.code?e.editForm=t.data.data:e.$message.error(t.data.msg)})).catch((function(t){e.$message.error(t.message)}))},save:function(){var e=this;this.$refs[\"editForm\"].validate((function(t){if(!t)return!1;var i=e.$loading({lock:!0});e.$http[e.editForm.id?\"put\":\"post\"](e.editForm.id?\"/layout/edit\":\"/layout/add\",e.editForm).then((function(t){i.close(),0===t.data.code?(e.$message({type:\"success\",message:t.data.msg}),e.$emit(\"reload\")):e.$message.error(t.data.msg)})).catch((function(t){i.close(),e.$message.error(t.message)}))}))},handleClose:function(e){e&&e(),this.$emit(\"returnBack\")}}},s=r,n=(i(\"68b4\"),i(\"0c7c\")),c=Object(n[\"a\"])(s,o,a,!1,null,\"1c9fe66c\",null);t[\"default\"]=c.exports},f960:function(e,t,i){\"use strict\";i(\"6e18\")}}]);","extractedComments":[]}