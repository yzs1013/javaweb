{"remainingRequest":"D:\\JavaWebVue\\javaweb-ui\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\JavaWebVue\\javaweb-ui\\src\\views\\common\\layout\\Layout.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\JavaWebVue\\javaweb-ui\\src\\views\\common\\layout\\Layout.vue","mtime":1616226484000},{"path":"D:\\JavaWebVue\\javaweb-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\JavaWebVue\\javaweb-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\JavaWebVue\\javaweb-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\JavaWebVue\\javaweb-ui\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQge21hcEdldHRlcnN9IGZyb20gJ3Z1ZXgnDQppbXBvcnQgRWxlSGVhZGVyIGZyb20gJy4vSGVhZGVyJw0KaW1wb3J0IEVsZVNpZGViYXIgZnJvbSAnLi9TaWRlYmFyJw0KaW1wb3J0IEVsZVRhYnMgZnJvbSAnLi9UYWJzJw0KaW1wb3J0IEVsZVNldHRpbmcgZnJvbSAnLi4vZnJhZ21lbnQvU2V0dGluZycNCmltcG9ydCBFbGVQYXNzd29yZCBmcm9tICcuLi9mcmFnbWVudC9QYXNzd29yZCcNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAiRWxlTGF5b3V0IiwNCiAgY29tcG9uZW50czoge0VsZUhlYWRlciwgRWxlU2lkZWJhciwgRWxlVGFicywgRWxlU2V0dGluZywgRWxlUGFzc3dvcmR9LA0KICBjb21wdXRlZDogew0KICAgIC8qIOahhuaetuW4g+WxgGNsYXNzICovDQogICAgbGF5b3V0Q2xhc3MoKSB7DQogICAgICByZXR1cm4gWw0KICAgICAgICAnZWxlLWFkbWluLWxheW91dCcsDQogICAgICAgIHsnZWxlLWxheW91dC1jb2xsYXBzZSc6IHRoaXMudGhlbWUuY29sbGFwc2V9LCAgLy8g5oqY5Y+g54q25oCBDQogICAgICAgIHsnZWxlLWxheW91dC1maXhlZCc6IHRoaXMudGhlbWUuZml4ZWRMYXlvdXR9LCAgLy8g5Zu65a6a6aG25qCP5ZKM5L6n5qCPDQogICAgICAgIHsnZWxlLXNpZGUtZGFyayc6IHRoaXMudGhlbWUuc2lkZVN0eWxlID09PSAxfSwgIC8vIOaal+iJsuS+p+agjw0KICAgICAgICB7J2VsZS1zaWRlLWNvbG9yLWljb24nOiB0aGlzLnRoZW1lLmNvbG9yZnVsSWNvbn0sICAvLyDkvqfmoI/lvanoibLlm77moIcNCiAgICAgICAgeydlbGUtaGVhZC1kYXJrJzogdGhpcy50aGVtZS5oZWFkU3R5bGUgIT09IDB9LCAgLy8g5pqX6Imy6aG25qCPDQogICAgICAgIHsnZWxlLWxvZ28tYXV0by1zaXplJzogdGhpcy50aGVtZS5sb2dvQXV0b1NpemUgfHwgdGhpcy50aGVtZS5sYXlvdXRTdHlsZSA9PT0gMX0sICAvLyBsb2dv5a695bqm6Ieq6YCC5bqUDQogICAgICAgIHsnZWxlLXRhYnMtc2hvdyc6IHRoaXMudGhlbWUuc2hvd1RhYnN9LCAgLy8g5byA5ZCv5aSa6aG1562+DQogICAgICAgIFsnJywgJ2VsZS10YWItZG90JywgJ2VsZS10YWItY2FyZCddW3RoaXMudGhlbWUudGFiU3R5bGVdLCAgLy8g6aG1562+6aOO5qC8DQogICAgICAgIHsnZWxlLWFkbWluLWJvZHktbGltaXQnOiAhdGhpcy50aGVtZS5ib2R5RnVsbH0gIC8vIOS4u+S9k+WGheWuueWumuWuvQ0KICAgICAgXQ0KICAgIH0sDQogICAgLyog5piv5ZCm5pi+56S65L6n6L655qCPICovDQogICAgc2hvd1NpZGViYXIoKSB7DQogICAgICByZXR1cm4gdGhpcy50aGVtZS5sYXlvdXRTdHlsZSAhPT0gMSB8fCB0aGlzLnRoZW1lLnNjcmVlbldpZHRoIDwgNzY4OyAgLy8g5bCP5bGP5bmV5by65Yi25bem5L6n6I+c5Y2V5qih5byPDQogICAgfSwNCiAgICAuLi5tYXBHZXR0ZXJzKFsndGhlbWUnXSksDQogIH0sDQogIG1vdW50ZWQoKSB7DQogICAgdGhpcy5nZXRVc2VySW5mbygpOw0KICAgIGlmICh0aGlzLiRzZXR0aW5nLndhdGNoUmVzaXplKSB7DQogICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5vbldpbmRvd1Jlc2l6ZSk7DQogICAgfQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgLyog6I635Y+W5b2T5YmN55So5oi35L+h5oGvICovDQogICAgZ2V0VXNlckluZm8oKSB7DQogICAgICBpZiAodGhpcy4kc2V0dGluZy51c2VyVXJsKSB7DQogICAgICAgIHRoaXMuJGh0dHAuZ2V0KHRoaXMuJHNldHRpbmcudXNlclVybCkudGhlbihyZXMgPT4gew0KICAgICAgICAgIGlmIChyZXMuZGF0YS5jb2RlID09PSAwKSB7DQogICAgICAgICAgICBpZiAodGhpcy4kc2V0dGluZy5wYXJzZVVzZXIpIHsNCiAgICAgICAgICAgICAgcmVzLmRhdGEgPSB0aGlzLiRzZXR0aW5nLnBhcnNlVXNlcihyZXMuZGF0YSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBsZXQgdXNlciA9IHJlcy5kYXRhLmRhdGE7DQogICAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgndXNlci9zZXRVc2VyJywgdXNlcik7DQogICAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgndXNlci9zZXRSb2xlcycsIHVzZXIgPyB1c2VyLnJvbGVzIDogbnVsbCk7DQogICAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgndXNlci9zZXRBdXRob3JpdGllcycsIHVzZXIgPyB1c2VyLmF1dGhvcml0aWVzIDogbnVsbCk7DQogICAgICAgICAgICAvLyDorr7nva7oioLngrnmnYPpmZANCiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCd1c2VyL3NldFBlcm1pc3Npb24nLCB1c2VyID8gdXNlci5wZXJtaXNzaW9uTGlzdCA6IG51bGwpOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5kYXRhLm1zZyk7DQogICAgICAgICAgfQ0KICAgICAgICB9KS5jYXRjaChlID0+IHsNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKGUubWVzc2FnZSk7DQogICAgICAgIH0pOw0KICAgICAgfQ0KICAgIH0sDQogICAgLyog5oqY5Y+gL+WxleW8gOS+p+i+ueagjyAqLw0KICAgIGNvbGxhcHNlKCkgew0KICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3RoZW1lL3RvZ2dsZScsICdjb2xsYXBzZScpOw0KICAgIH0sDQogICAgLyog56qX5Y+j5aSn5bCP5pS55Y+Y55uR5ZCsICovDQogICAgb25XaW5kb3dSZXNpemUoKSB7DQogICAgICBsZXQgc2NyZWVuV2lkdGggPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGggfHwgZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aDsNCiAgICAgIGlmICh0aGlzLiRzdG9yZS5zdGF0ZS50aGVtZS5zY3JlZW5XaWR0aCAhPT0gc2NyZWVuV2lkdGgpIHsNCiAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3RoZW1lL3NldCcsIHsNCiAgICAgICAgICBrZXk6ICdzY3JlZW5XaWR0aCcsIHZhbHVlOiBzY3JlZW5XaWR0aA0KICAgICAgICB9KTsNCiAgICAgIH0NCiAgICB9DQogIH0sDQogIGRlc3Ryb3llZCgpIHsNCiAgICAvLyDplIDmr4HlsY/luZVyZXNpemXnm5HlkKwNCiAgICBpZiAodGhpcy4kc2V0dGluZy53YXRjaFJlc2l6ZSkgew0KICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMub25XaW5kb3dSZXNpemUpOw0KICAgIH0NCiAgfSwNCiAgd2F0Y2g6IHsNCiAgICAvKiDnm5HlkKzot6/nlLHlj5jljJYgKi8NCiAgICAkcm91dGUoKSB7DQogICAgICBpZiAodGhpcy50aGVtZS5zY3JlZW5XaWR0aCA8IDc2OCkgew0KICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgndGhlbWUvc2V0Jywge2tleTogJ2NvbGxhcHNlJywgdmFsdWU6IHRydWV9KTsNCiAgICAgIH0NCiAgICAgIGlmICghdGhpcy4kc2V0dGluZy53YXRjaFJlc2l6ZSkgew0KICAgICAgICB0aGlzLm9uV2luZG93UmVzaXplKCk7DQogICAgICB9DQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["Layout.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAoBA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Layout.vue","sourceRoot":"src/views/common/layout","sourcesContent":["<!-- 页面布局 -->\r\n<template>\r\n  <div :class=\"layoutClass\">\r\n    <ele-header/><!-- 顶栏 -->\r\n    <el-container class=\"ele-admin-main\">\r\n      <ele-sidebar v-if=\"showSidebar\"/><!-- 侧边栏 -->\r\n      <div class=\"ele-admin-body\">\r\n        <ele-tabs v-if=\"theme.showTabs\"/><!-- 多页签 -->\r\n        <keep-alive :include=\"$setting.keepAliveList\">\r\n          <router-view v-if=\"!theme.reload\"/><!-- 路由出口 -->\r\n        </keep-alive>\r\n      </div>\r\n    </el-container>\r\n    <div class=\"ele-admin-shade\" @click=\"collapse\"></div><!-- 小屏幕下遮罩层 -->\r\n    <ele-setting v-if=\"$setting.showSetting\"/><!-- 主题设置抽屉 -->\r\n    <ele-password/><!-- 修改密码弹窗 -->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {mapGetters} from 'vuex'\r\nimport EleHeader from './Header'\r\nimport EleSidebar from './Sidebar'\r\nimport EleTabs from './Tabs'\r\nimport EleSetting from '../fragment/Setting'\r\nimport ElePassword from '../fragment/Password'\r\n\r\nexport default {\r\n  name: \"EleLayout\",\r\n  components: {EleHeader, EleSidebar, EleTabs, EleSetting, ElePassword},\r\n  computed: {\r\n    /* 框架布局class */\r\n    layoutClass() {\r\n      return [\r\n        'ele-admin-layout',\r\n        {'ele-layout-collapse': this.theme.collapse},  // 折叠状态\r\n        {'ele-layout-fixed': this.theme.fixedLayout},  // 固定顶栏和侧栏\r\n        {'ele-side-dark': this.theme.sideStyle === 1},  // 暗色侧栏\r\n        {'ele-side-color-icon': this.theme.colorfulIcon},  // 侧栏彩色图标\r\n        {'ele-head-dark': this.theme.headStyle !== 0},  // 暗色顶栏\r\n        {'ele-logo-auto-size': this.theme.logoAutoSize || this.theme.layoutStyle === 1},  // logo宽度自适应\r\n        {'ele-tabs-show': this.theme.showTabs},  // 开启多页签\r\n        ['', 'ele-tab-dot', 'ele-tab-card'][this.theme.tabStyle],  // 页签风格\r\n        {'ele-admin-body-limit': !this.theme.bodyFull}  // 主体内容定宽\r\n      ]\r\n    },\r\n    /* 是否显示侧边栏 */\r\n    showSidebar() {\r\n      return this.theme.layoutStyle !== 1 || this.theme.screenWidth < 768;  // 小屏幕强制左侧菜单模式\r\n    },\r\n    ...mapGetters(['theme']),\r\n  },\r\n  mounted() {\r\n    this.getUserInfo();\r\n    if (this.$setting.watchResize) {\r\n      window.addEventListener('resize', this.onWindowResize);\r\n    }\r\n  },\r\n  methods: {\r\n    /* 获取当前用户信息 */\r\n    getUserInfo() {\r\n      if (this.$setting.userUrl) {\r\n        this.$http.get(this.$setting.userUrl).then(res => {\r\n          if (res.data.code === 0) {\r\n            if (this.$setting.parseUser) {\r\n              res.data = this.$setting.parseUser(res.data);\r\n            }\r\n            let user = res.data.data;\r\n            this.$store.dispatch('user/setUser', user);\r\n            this.$store.dispatch('user/setRoles', user ? user.roles : null);\r\n            this.$store.dispatch('user/setAuthorities', user ? user.authorities : null);\r\n            // 设置节点权限\r\n            this.$store.dispatch('user/setPermission', user ? user.permissionList : null);\r\n          } else {\r\n            this.$message.error(res.data.msg);\r\n          }\r\n        }).catch(e => {\r\n          this.$message.error(e.message);\r\n        });\r\n      }\r\n    },\r\n    /* 折叠/展开侧边栏 */\r\n    collapse() {\r\n      this.$store.dispatch('theme/toggle', 'collapse');\r\n    },\r\n    /* 窗口大小改变监听 */\r\n    onWindowResize() {\r\n      let screenWidth = document.documentElement.clientWidth || document.body.clientWidth;\r\n      if (this.$store.state.theme.screenWidth !== screenWidth) {\r\n        this.$store.dispatch('theme/set', {\r\n          key: 'screenWidth', value: screenWidth\r\n        });\r\n      }\r\n    }\r\n  },\r\n  destroyed() {\r\n    // 销毁屏幕resize监听\r\n    if (this.$setting.watchResize) {\r\n      window.removeEventListener('resize', this.onWindowResize);\r\n    }\r\n  },\r\n  watch: {\r\n    /* 监听路由变化 */\r\n    $route() {\r\n      if (this.theme.screenWidth < 768) {\r\n        this.$store.dispatch('theme/set', {key: 'collapse', value: true});\r\n      }\r\n      if (!this.$setting.watchResize) {\r\n        this.onWindowResize();\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n"]}]}