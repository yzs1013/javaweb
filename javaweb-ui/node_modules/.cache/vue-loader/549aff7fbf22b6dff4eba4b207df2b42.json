{"remainingRequest":"D:\\JavaWebVue\\javaweb-ui\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\JavaWebVue\\javaweb-ui\\src\\views\\system\\layout\\editForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\JavaWebVue\\javaweb-ui\\src\\views\\system\\layout\\editForm.vue","mtime":1616124094000},{"path":"D:\\JavaWebVue\\javaweb-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\JavaWebVue\\javaweb-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\JavaWebVue\\javaweb-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\JavaWebVue\\javaweb-ui\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB1cGxvYWRJbWFnZSBmcm9tICdAL2NvbXBvbmVudHMvdXBsb2FkSW1hZ2UnCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkxheW91dEVkaXQiLAogIGNvbXBvbmVudHM6IHt1cGxvYWRJbWFnZX0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGRpcmVjdGlvbjogJ3J0bCcsCiAgICAgIGVkaXRGb3JtOiB7fSwgIC8vIOihqOWNleaVsOaNrgogICAgICBlZGl0UnVsZXM6IHsgIC8vIOihqOWNlemqjOivgeinhOWImQogICAgICAgIGxvY0Rlc2M6IFsKICAgICAgICAgIHtyZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeW4g+WxgOS9jee9ruaPj+i/sCcsIHRyaWdnZXI6ICdibHVyJ30KICAgICAgICBdLAogICAgICAgIGxvY0lkOiBbCiAgICAgICAgICB7cmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fpgInmi6nmiYDlsZ7luIPlsYDkvY3nva4nLCB0cmlnZ2VyOiAnYmx1cid9CiAgICAgICAgXSwKICAgICAgICBpdGVtSWQ6IFsKICAgICAgICAgIHtyZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+mAieaLqeaJgOWxnuermeeCuScsIHRyaWdnZXI6ICdibHVyJ30KICAgICAgICBdLAogICAgICAgIHR5cGU6IFsKICAgICAgICAgIHtyZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+mAieaLqeW4g+WxgOexu+WeiycsIHRyaWdnZXI6ICdibHVyJ30KICAgICAgICBdLAogICAgICAgIHR5cGVJZDogWwogICAgICAgICAge3JlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36YCJ5oup5biD5bGA5YaF5a65JywgdHJpZ2dlcjogJ2JsdXInfQogICAgICAgIF0sCiAgICAgICAgc29ydDogWwogICAgICAgICAge3JlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl5o6S5bqPJywgdHJpZ2dlcjogJ2JsdXInfQogICAgICAgIF0sCiAgICAgIH0sCiAgICAgIHVwZERpcjogJ2xheW91dCcsCiAgICB9OwogIH0sCiAgcHJvcHM6IHsKICAgIHZpc2libGU6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgIH0sCiAgICBsYXlvdXRJZDogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIGRlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIDA7CiAgICAgIH0KICAgIH0sCiAgICAvLyDmjqXmlLbnq5nngrkKICAgIGl0ZW1MaXN0OnsKICAgICAgdHlwZTpBcnJheSwKICAgICAgZGVmYXVsdCgpewogICAgICAgIHJldHVybiBbXQogICAgICB9CiAgICB9LAogIH0sCiAgY29tcHV0ZWQ6IHsKICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmdldExheW91dEluZm8oKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8qKgogICAgICog6I635Y+W5biD5bGA6K+m5oOFCiAgICAgKi8KICAgIGdldExheW91dEluZm8oKXsKICAgICAgdGhpcy4kaHR0cC5nZXQoJy9sYXlvdXQvaW5mby8nICsgdGhpcy5sYXlvdXRJZCkudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMuZGF0YS5jb2RlID09PSAwKSB7CiAgICAgICAgICB0aGlzLmVkaXRGb3JtID0gcmVzLmRhdGEuZGF0YTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMuZGF0YS5tc2cpOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZSA9PiB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihlLm1lc3NhZ2UpOwogICAgICB9KTsKICAgIH0sCiAgICAvKiDkv53lrZjnvJbovpEgKi8KICAgIHNhdmUoKSB7CiAgICAgIHRoaXMuJHJlZnNbJ2VkaXRGb3JtJ10udmFsaWRhdGUoKHZhbGlkKSA9PiB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICBjb25zdCBsb2FkaW5nID0gdGhpcy4kbG9hZGluZyh7bG9jazogdHJ1ZX0pOwogICAgICAgICAgdGhpcy4kaHR0cFt0aGlzLmVkaXRGb3JtLmlkID8gJ3B1dCcgOiAncG9zdCddKHRoaXMuZWRpdEZvcm0uaWQgPyAnL2xheW91dC9lZGl0JyA6ICcvbGF5b3V0L2FkZCcsIHRoaXMuZWRpdEZvcm0pLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgbG9hZGluZy5jbG9zZSgpOwogICAgICAgICAgICBpZiAocmVzLmRhdGEuY29kZSA9PT0gMCkgewogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoe3R5cGU6ICdzdWNjZXNzJywgbWVzc2FnZTogcmVzLmRhdGEubXNnfSk7CiAgICAgICAgICAgICAgdGhpcy4kZW1pdCgncmVsb2FkJykKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5kYXRhLm1zZyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLmNhdGNoKGUgPT4gewogICAgICAgICAgICBsb2FkaW5nLmNsb3NlKCk7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoZS5tZXNzYWdlKTsKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvKioKICAgICAqIOWFs+mXremhtemdogogICAgICovCiAgICBoYW5kbGVDbG9zZShoaWRlKSB7CiAgICAgIGlmIChoaWRlKSB7CiAgICAgICAgaGlkZSgpOwogICAgICB9CiAgICAgIHRoaXMuJGVtaXQoInJldHVybkJhY2siKTsKICAgIH0KICB9Cn07Cg=="},{"version":3,"sources":["editForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsDA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"editForm.vue","sourceRoot":"src/views/system/layout","sourcesContent":["<template>\r\n  <el-drawer\r\n    class=\"edit-table\"\r\n    title=\"编辑布局\"\r\n    :visible.sync=\"visible\"\r\n    :direction=\"direction\"\r\n    :size=\"'calc(100vw - 256px)'\"\r\n    :before-close=\"handleClose\"\r\n  >\r\n    <el-form :model=\"editForm\" ref=\"editForm\" :rules=\"editRules\" label-width=\"150px\" style=\"margin:10px auto;\">\r\n      <el-form-item label=\"布局图片：\">\r\n        <uploadImage :limit=\"1\" :updDir=\"updDir\" v-model=\"editForm.image\"></uploadImage>\r\n      </el-form-item>\r\n      <el-row :gutter=\"15\">\r\n        <el-col :sm=\"12\">\r\n          <el-form-item label=\"布局位置描述：\" prop=\"locDesc\">\r\n            <el-input v-model=\"editForm.locDesc\" placeholder=\"请输入布局位置描述\" clearable/>\r\n          </el-form-item>\r\n          <el-form-item label=\"所属站点：\" prop=\"itemId\" :rules=\"{\r\n                  required: true, message: '所属站点不能为空', trigger: 'change'\r\n                }\">\r\n            <el-select filterable clearable v-model=\"editForm.itemId\" size=\"small\" placeholder=\"-请选择所属站点-\" class=\"ele-block\">\r\n              <el-option v-for=\"item in itemList\" :key=\"item.id\" :label=\"item.name\" :value=\"item.id\"/>\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item label=\"布局类型：\" prop=\"type\">\r\n            <el-select v-model=\"editForm.type\" placeholder=\"请选择布局类型：\" class=\"ele-block\" clearable>\r\n              <el-option label=\"CMS文章\" :value=\"1\"/>\r\n              <el-option label=\"通知公告\" :value=\"2\"/>\r\n            </el-select>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :sm=\"12\">\r\n          <el-form-item label=\"布局描述位置：\" prop=\"locId\">\r\n            <el-input v-model=\"editForm.locId\" placeholder=\"请输入布局描述位置\" clearable/>\r\n          </el-form-item>\r\n          <el-form-item label=\"排序号：\" prop=\"sort\">\r\n            <el-input-number v-model=\"editForm.sort\" controls-position=\"right\" :min=\"0\"\r\n                              placeholder=\"请输入排序号\" class=\"ele-fluid ele-text-left\"/>\r\n          </el-form-item>\r\n          <el-form-item label=\"布局内容：\" prop=\"typeId\">\r\n            <el-input v-model=\"editForm.typeId\" placeholder=\"请选择布局内容\" clearable/>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n      <el-form-item style=\"text-align: center;margin-left:-100px;margin-top:10px;\">\r\n        <el-button @click=\"save\" type=\"primary\" size=\"medium\">保存 </el-button>\r\n        <el-button @click=\"$emit('returnBack')\" size=\"medium\">返回</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n  </el-drawer>\r\n</template>\r\n\r\n<script>\r\n  import uploadImage from '@/components/uploadImage'\r\n\r\n  export default {\r\n    name: \"LayoutEdit\",\r\n    components: {uploadImage},\r\n    data() {\r\n      return {\r\n        direction: 'rtl',\r\n        editForm: {},  // 表单数据\r\n        editRules: {  // 表单验证规则\r\n          locDesc: [\r\n            {required: true, message: '请输入布局位置描述', trigger: 'blur'}\r\n          ],\r\n          locId: [\r\n            {required: true, message: '请选择所属布局位置', trigger: 'blur'}\r\n          ],\r\n          itemId: [\r\n            {required: true, message: '请选择所属站点', trigger: 'blur'}\r\n          ],\r\n          type: [\r\n            {required: true, message: '请选择布局类型', trigger: 'blur'}\r\n          ],\r\n          typeId: [\r\n            {required: true, message: '请选择布局内容', trigger: 'blur'}\r\n          ],\r\n          sort: [\r\n            {required: true, message: '请输入排序', trigger: 'blur'}\r\n          ],\r\n        },\r\n        updDir: 'layout',\r\n      };\r\n    },\r\n    props: {\r\n      visible: {\r\n        type: Boolean,\r\n        default() {\r\n          return false;\r\n        }\r\n      },\r\n      layoutId: {\r\n        type: Number,\r\n        default() {\r\n          return 0;\r\n        }\r\n      },\r\n      // 接收站点\r\n      itemList:{\r\n        type:Array,\r\n        default(){\r\n          return []\r\n        }\r\n      },\r\n    },\r\n    computed: {\r\n    },\r\n    mounted() {\r\n      this.getLayoutInfo();\r\n    },\r\n    methods: {\r\n      /**\r\n       * 获取布局详情\r\n       */\r\n      getLayoutInfo(){\r\n        this.$http.get('/layout/info/' + this.layoutId).then(res => {\r\n          if (res.data.code === 0) {\r\n            this.editForm = res.data.data;\r\n          } else {\r\n            this.$message.error(res.data.msg);\r\n          }\r\n        }).catch(e => {\r\n          this.$message.error(e.message);\r\n        });\r\n      },\r\n      /* 保存编辑 */\r\n      save() {\r\n        this.$refs['editForm'].validate((valid) => {\r\n          if (valid) {\r\n            const loading = this.$loading({lock: true});\r\n            this.$http[this.editForm.id ? 'put' : 'post'](this.editForm.id ? '/layout/edit' : '/layout/add', this.editForm).then(res => {\r\n              loading.close();\r\n              if (res.data.code === 0) {\r\n                this.$message({type: 'success', message: res.data.msg});\r\n                this.$emit('reload')\r\n              } else {\r\n                this.$message.error(res.data.msg);\r\n              }\r\n            }).catch(e => {\r\n              loading.close();\r\n              this.$message.error(e.message);\r\n            });\r\n          } else {\r\n            return false;\r\n          }\r\n        });\r\n      },\r\n      /**\r\n       * 关闭页面\r\n       */\r\n      handleClose(hide) {\r\n        if (hide) {\r\n          hide();\r\n        }\r\n        this.$emit(\"returnBack\");\r\n      }\r\n    }\r\n  };\r\n</script>\r\n\r\n<style scoped>\r\n/* 选项卡 */\r\n.demo-icon-tabs >>> .el-tabs__nav-scroll {\r\n  padding: 0 20px;\r\n}\r\n\r\n.demo-icon-tabs >>> .el-tabs__item {\r\n  height: 45px;\r\n  line-height: 45px;\r\n}\r\n</style>\r\n"]}]}